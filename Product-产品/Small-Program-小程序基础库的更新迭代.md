## 小程序基础库的更新迭代

#### 4.1 开发流程基本介绍

在启动开发前，首先我们对整个小程序整体的产品体验有一个清晰的规划和定义，一般会通过交互图或者手稿描绘小程序的界面交互和界面之间的跳转关系。图4-1是一个管理文章留言小程序的交互图。

##### 4.3.3 界面滚动

往往手机屏幕是承载不了所有信息的，所以内容区域肯定会超出屏幕区域，用户可以通过滑动屏幕来查看下一屏的内容，这是非常常见的界面滚动的交互。

为了让用户可以快速刷新当前界面的信息，一般在小程序里会通过下拉整个界面这个操作来触发，如图4-21所示。

多数的购物小程序会在首页展示一个商品列表，用户滚动到底部的时候，会加载下一页的商品列表渲染到列表的下方，我们把这个交互操作叫为**上拉触底**。

### 第5章 小程序的协同工作和发布

#### 5.1 协同工作

##### 5.1.1 人员组织结构和权限分配

项目管理成员负责统筹整个项目的进展和风险、把控小程序对外发布的节奏，产品组提出需求，设计组与产品讨论并对需求进行抽象，设计出可视化流程与图形，输出设计方案。开发组依据设计方案，进行程序代码的编写，代码编写完成后，**产品组与设计组体验小程序的整体流**程，测试组编写测试用例并对小程序进行各种边界测试。项目一般的成员构成与工作流程如图5-2所示。

本小节将从产品和设计两方面，帮助开发者在小程序发布之前审视自身产品设计和用户体验情况，达到较高的用户体验水准，且是对用户友好的一款产品。

#### 5.2 用户体验审视

在小程序发布之前，我们建议开发者务必对小程序做认真严格的用户体验审视。有创造性的产品思路、友好流畅的用户体验和稳定谨慎的运营也是一款优秀小程序能够脱颖而出的关键因素。

##### 5.2.1 产品和运营思路

我们希望开发者能坚持“**一切以用户价值为依归**” 这一产品观，让创造发挥价值。产品设计过程中，开发者亦需要保持一定的克制心态。繁复的需求和商业行为，在用户利益前都需要谨慎平衡。

在运营行为上，小程序需要遵从微信小程序运营规范。若开发者的小程序违反了其中的条款、相关平台规则或法律法规，或对公众平台、开放平台造成了影响，可能会被强制处罚。条款将根据新问题、相关法律法规或产品运营需要对其内容进行修改并更新，详细条款请查阅小程序运营文档[[3\]](https://developers.weixin.qq.com/ebook?action=get_post_info&docid=0002ac4c980cb0bb0086b37695b80a#_ftn3)。

##### 5.2.2 体验和设计评估

在小程序的设计和开发阶段，我们希望开发者始终将优秀的用户体验作为产品目标之一，通过积极的用户体验和设计评估，在不断的迭代中完善用户体验，用心打磨小程序，从而更好实现产品价值，激发用户正向情感。因此，我们建议小程序在开发过程中以及发布之前，开发者务必对自身产品的体验和设计做全面检查。

###### 1. 导航清晰

每个界面的导航，都指向清晰，有路可退。

###### 2. 流程明确

用户进行操作时，应确定当前页面只设置了单一任务，且不出现目标流程之外的内容。此举有利于让用户明确当前操作的目的，从而集中精力聚焦当前任务，并通过简单操作达到结果。

###### 3. 重点突出

每个页面都应有明确的重点，以便于用户每进入一个新页面的时候都能快速理解页面内容。在确定过了重点的前提下，应尽量避免页面上出现其它与用户的决策和操作无关的干扰因素。

###### 4. 符合预期

对用户友好的产品，需要在其设计阶段便将自身信息架构和模型与用户的**心理模型匹配**，**以便于用户能够依据以往的使用经验或其他生活经验，降低使用的理解和学习成本，从而快速达成使用目的。**

###### 5. 等待与反馈

在用户使用产品时，往往页面过长时间的等待会引起不良情绪。在不得不需要用户以一定的加载等待时间作为代价时，我们需要用明确的等待状态告知用户，以舒缓用户在等待时期的不良情绪。

###### 6. 异常处理

在设计任务和流程时，往往用户会因为各种原因导致操作失败。此类异常场景往往是用户最为沮丧和需要帮助的时候，因此，要注意在异常状态下的设计。**在出现异常的时候需要给予用户清晰的状态提示，并告知解决方案，使其有路可退。**

###### 7. 内容和文案准确友好

在产品通过文案或者页面表达内容时，需要斟酌使用的内容和文案。**使用的语言应当简洁，礼貌并容易被用户理解。**此外，还要注意专业术语需要被清楚解释，特有词汇全局需用统一的特定表达，重要内容能够被快速获取，且页面不存在无关文案干扰用户决策。

###### 8. 和谐统一

小程序内的设计风格应该是**统一、和谐且具有延续性**的，这样才能确保用户建立完整的产品品牌认知，更好地辨析不同的小程序。

###### 9. 平台适配

在小程序的设计过程中，应该充分考虑iOS与Android平台不同的设计规范，对设计进行适当调整以适应不同平台上的用户使用习惯。

##### 5.2.3 用户体验测试和完善体验

我们建议开发者在发布之前，结合体验和设计评估过程，**同步进行用户体验测试，以发现更多设计在实际场景和应用中，存在的难以预见的可用性问题。**或者以用户测试环节，验证体验和设计评估迭代成果，在不断的更新和迭代中打磨小程序体验。

以下是我们关于进行用户体验测试的一些建议：

1. **用户体验测试，可以在设计、开发、测试等全部阶段使用。是一种低成本检测设计质量的方法。**
2. **尽早进行用户体验测试。**在产品及设计过程中，尚未启动开发时，便可以用低保真/高保真模型进行用户体验测试，以检测设计质量。这样更有利于及早发现问题并进行调整，减少开发成本。
3. 用户测试之前需要确定好需要**被检验的流程和任务**，需要为用户构建明确的目标，并提示用户以完成任务的方式完成目标。
4. **最好选择产品真实的受众，作为被测试的用户**。并在测试时，使用户处于真实的场景和时间下。
5. 设计**开放性的问题让用户回答**。不用带有主观性的询问语言，引导用户回答。
6. 在用户测试过程中，需要全程做好记录。

##### 5.3.2 发布模式

分阶段发布是指分不同时间段来控制部分用户使用最新的发布版本，分阶段发布我们也称为**灰度发布**。一般来说，普通小程序发布时采用全量发布即可，当小程序承载的功能越来越多，使用的用户数越来越多时，采用分阶段发布是一个非常好的控制风险的办法。因为随着程序的复杂度提高以及影响面的扩大，新版本的代码改动或多或少会带来Bug，作为服务方当然不希望异常的服务状态一下子扩散到整个用户群体，此时应该通过分阶段发布来逐步观察服务的稳定性，再决定是否进行全量发布。

一般我们认为全量发布的24小时后，所有用户才会真正使用到最新版的小程序。

##### 5.3.3 小程序码

小程序平台提供的二维码的形式。我们发现用户在扫一个二维码时，**他并不知道当前这次扫码会出现什么样的服务**，因为二维码的背后有可能是公众号、小程序、网页服务、支付页面、添加好友等不同的服务。为了让用户在扫码之前就有一个明确的预期，因此微信设计了小程序码。

自定义分析：<https://developers.weixin.qq.com/miniprogram/analysis/custom/#22-%E4%BA%8B%E4%BB%B6%E7%9A%84%E7%BC%96%E8%BE%91%E4%B8%8E%E5%8F%91%E5%B8%83>

##### 7.1.1 代码包下载

在某个小程序第一次启动时，微信需要下载小程序代码包。此后，如果小程序代码包未更新且还被保留在缓存中，则下载小程序代码包的步骤会被跳过。下载到的小程序代码包不是小程序的源代码，而是编译、压缩、打包之后的代码包。代码包大小可以在开发者工具的“详情”栏中找到。
从开发者的角度看，控制代码包大小有助于减少小程序的启动时间。对低于1MB的代码包，其下载时间可以控制在929ms（iOS）、1500ms（Android）内。

##### 7.1.2 分包加载流程

小程序的代码将打包在一起，在小程序启动时一次性下载完成。采用分包时，小程序的代码包可以被划分为几个：一个是“主包”，包含小程序启动时会马上打开的页面代码和相关资源；其余是“分包”，包含其余的代码和资源。这样，小程序启动时，只需要先将主包下载完成，就可以立刻启动小程序。这样就可以显著降低小程序代码包的下载时间。



##### 8.1.2 基础库的版本号

小程序基础库版本号使用 semver 规范，格式为 Major.Minor.Patch，其中Major、Minor、Patch均为整数，1.9.901、2.44.322、10.32.44 都是符合 semver 风格的版本号。通常我们月度发布版本会把Minor提升一位，例如从1.9.x升级到1.10.x，如果是修正版本，会把Patch提升一位，例如1.10.0升级到 1.10.1。Major位则是重大特性发布时才会被提升一位。

