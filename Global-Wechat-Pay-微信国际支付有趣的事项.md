## 有趣的微信国际支付

### 前提

我们公司有很多业务线，而不同的业务线在财务会计上却属于不同的公司，这就会出现第一个事情：我们公司有很多公司。既然有那么多公司，若要实现财务正确收账，那必然要注册不同微信服务，之前都是另一位产品小伙伴在负责这件事，他前前后后鼓捣一个月才弄明白这件事，我一直嘲讽他说：“这个东西要搞一个月？？？”。正式接手处理这块业务是在那位小伙伴离职之后，刚开始我也很头痛，因为国内微信我都没搞明白，却突然要搞国际微信支付，途中打过几次电话给他，反正打完也是迷迷糊糊，什么都对不上，发挥不懂就瞎问的精神，从微信客服问到开放平台客服，然后问到微信国际支付业务团队，一路问问问，终于搞懂了。。。总之，就是累。。。不过还是很感谢微信国际支付团队

### 基本概念

***<u>一定要先看这部分</u>***

* [微信开放平台](https://open.weixin.qq.com/)
  * APP/H5/PC想要使用微信登录/支付，一定要经过开放平台。
* [微信公众平台]([https://mp.weixin.qq.com](https://mp.weixin.qq.com/))
  * 便于运营者统一管理微信服务号, 订阅号和小程序, 负责微信内部服务的操作。
  * H5想实现登录和支付，必须要注册一个公众平台（通俗说：试图在微信浏览器内，调起微信支付，必须开通一个服务号）
* [微信商户平台](https://pay.weixin.qq.com/)
  * 收钱的，需要用来直接连开放平台或者直接连公众平台.
* 微信支付分类
  * 公众号支付（JSAPI支付 删除）：在微信浏览器使用微信支付。
  * 扫码支付: 扫描PCWeb上的二维码, 发起支付请求。
  * APP支付: 使用iOS或Android客户端, 唤起微信客户端, 发起支付请求。
  * 小程序支付: 用户使用微信小程序, 发起支付请求。
  * H5支付（微信国际支付暂不支持）: 用户在手机使用非微信Browser的浏览器(如UC浏览器,Safari等)，发起支付请求。

### 说在中间

搞清楚上述概念后，就可以根据不同的业务需求去申请相应的账号了。申请开放平台的时候就可以选择你是境内还是境外主体，千万别选错。

不同公司注册的微信服务不允许相互绑定（我指的是开放平台、商户平台、公众平台），换句话说，假设我有A,B两家公司，A公司若注册了开放平台，但是不允许与B公司注册的商户平台打通，她需要一个专属她的商户平台。

### 微信国际支付beta版的注意事项

* 这是我们团队亲自走过的路，希望能为大家带来帮助。
  * 微信国际支付还是beta版，惊喜不惊喜，意外不意外！
  * 公众平台和开放平台想要和beta版的国际微信支付发生关系（绑定），是靠发邮件！你需要将相关的appid和想与之绑定的商品平台ID发给一个邮箱："wxpayglobal";让那边的业务人员去绑定！直接在界面上绑定会发生报错！
  * 国际微信支付退款没有回调！你只能上商户平台手动查，没有回调让你查到回调状态。
  * 微信国际支付，目前不支持H5调起。只能用jsapi在微信浏览器内调起。
  * 祝微信国际支付团队越来越好。

